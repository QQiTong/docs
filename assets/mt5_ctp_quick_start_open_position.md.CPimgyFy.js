import{_ as s,c as a,ag as t,o as l}from"./chunks/framework.CCnnzLsu.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://vite.dev/mt5_ctp/quick_start/open_position"}],["meta",{"property":"og:title","content":""}]]},"headers":[],"relativePath":"mt5_ctp/quick_start/open_position.md","filePath":"mt5_ctp/quick_start/open_position.md","lastUpdated":null}'),e={name:"mt5_ctp/quick_start/open_position.md"};function n(h,i,o,p,r,d){return l(),a("div",null,i[0]||(i[0]=[t(`<h3 id="_10-mt5ctp基础函数-开仓" tabindex="-1">10 MT5CTP基础函数 开仓 <a class="header-anchor" href="#_10-mt5ctp基础函数-开仓" aria-label="Permalink to &quot;10 MT5CTP基础函数 开仓&quot;">​</a></h3><h4 id="一、开仓核心概念与报价机制" tabindex="-1">一、开仓核心概念与报价机制 <a class="header-anchor" href="#一、开仓核心概念与报价机制" aria-label="Permalink to &quot;一、开仓核心概念与报价机制&quot;">​</a></h4><h5 id="_1-报价基础-ask与bid" tabindex="-1">1. 报价基础：Ask与Bid <a class="header-anchor" href="#_1-报价基础-ask与bid" aria-label="Permalink to &quot;1. 报价基础：Ask与Bid&quot;">​</a></h5><ul><li><strong>定义</strong>： <ul><li><strong>Ask（申卖价）</strong>：卖方挂单价格（价格较高，位于盘口上方）。</li><li><strong>Bid（申买价）</strong>：买方挂单价格（价格较低，位于盘口下方）。</li></ul></li><li><strong>中英文切换</strong>：通过MT5 CTP的<code>查看 → Language</code>切换中英文界面，验证盘口报价对应关系（如英文界面下Ask/Bid更直观）。</li></ul><h5 id="_2-撮合原则-价格优先、时间优先" tabindex="-1">2. 撮合原则（价格优先、时间优先） <a class="header-anchor" href="#_2-撮合原则-价格优先、时间优先" aria-label="Permalink to &quot;2. 撮合原则（价格优先、时间优先）&quot;">​</a></h5><ol><li><strong>价格优先</strong>： <ul><li>买入时，价高者先成交；卖出时，价低者先成交。</li><li>例：若买盘报价3470，当前卖一价3468，则3470报价会优先成交。</li></ul></li><li><strong>时间优先</strong>：相同价格下，先挂单者先成交。</li><li><strong>极端情况</strong>：以涨跌停板价格报价可确保成交（除非封板），系统会按最优价格撮合成交。</li></ol><h5 id="_3-报价类型" tabindex="-1">3. 报价类型 <a class="header-anchor" href="#_3-报价类型" aria-label="Permalink to &quot;3. 报价类型&quot;">​</a></h5><table tabindex="0"><thead><tr><th><strong>类型</strong></th><th><strong>含义</strong></th><th><strong>代码示例</strong></th></tr></thead><tbody><tr><td><strong>限价成交</strong></td><td>指定具体价格（如以3460买入，未达价格则不成交）。</td><td><code>Trade.Buy(1, &quot;RB2301&quot;, 3460);</code></td></tr><tr><td><strong>市价成交</strong></td><td>按市场当前最优价格成交（不指定价格，代码中省略价格参数）。</td><td><code>Trade.Buy(1, &quot;RB2301&quot;);</code></td></tr><tr><td><strong>对手价成交</strong></td><td>买入时按卖一价（Ask）、卖出时按买一价（Bid），尽量保证即时成交。</td><td><code>Trade.Buy(1, &quot;RB2301&quot;, Symbol.Ask());</code></td></tr><tr><td><strong>挂单成交</strong></td><td>- <strong>Buy Limit</strong>：低于当前价挂单买入（预期价格下跌后成交）。<br>- <strong>Buy Stop</strong>：高于当前价挂单买入（预期价格上涨后成交）。</td><td><code>Trade.BuyLimit(1, &quot;RB2301&quot;, 3450);</code><br><code>Trade.BuyStop(1, &quot;RB2301&quot;, 3480);</code></td></tr></tbody></table><h4 id="二、开仓实战-工具与代码实现" tabindex="-1">二、开仓实战：工具与代码实现 <a class="header-anchor" href="#二、开仓实战-工具与代码实现" aria-label="Permalink to &quot;二、开仓实战：工具与代码实现&quot;">​</a></h4><h5 id="_1-开仓工具-uictp与app-tours" tabindex="-1">1. 开仓工具：UICTP与APP tours <a class="header-anchor" href="#_1-开仓工具-uictp与app-tours" aria-label="Permalink to &quot;1. 开仓工具：UICTP与APP tours&quot;">​</a></h5><ul><li><p><strong>UICTP界面</strong>：</p><ul><li>加载后显示合约行情、持仓信息、交易面板，支持设置止损/止盈点数（如设为20点，自动计算止损止盈价）。</li><li><strong>划线下单</strong>：在图表中画线并标注<code>Buy X</code>或<code>Sell X</code>（X为手数），价格触碰线时自动开仓（仅触发一次）。</li></ul></li><li><p><strong>APP tours功能</strong>：</p><ul><li>直观展示开仓后的持仓线（黄色为开仓价，上下线分别为止盈/止损），支持多单/空单分色显示。</li><li>支持<strong>锁仓操作</strong>：同时持有多单和空单（如股指期货当日平仓手续费较高时使用）。</li></ul></li></ul><h5 id="_2-代码开仓-核心函数与参数" tabindex="-1">2. 代码开仓：核心函数与参数 <a class="header-anchor" href="#_2-代码开仓-核心函数与参数" aria-label="Permalink to &quot;2. 代码开仓：核心函数与参数&quot;">​</a></h5><ul><li><p><strong>对象定义</strong>：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#define</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _MT5CTP_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;MT5CTP/Trade/Trade.mqh&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CTrade Trade;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 定义交易对象</span></span></code></pre></div></li><li><p><strong>基本开仓语法</strong>：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 市价买入1手RB2301  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Trade.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Buy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 限价买入2手，价格3460  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Trade.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Buy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3460</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 以涨停板价格买入（需先获取涨停价）  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CSymbolInfo Symbol;  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> upper_limit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">UpperLimit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Trade.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Buy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, upper_limit);</span></span></code></pre></div></li><li><p><strong>挂单开仓</strong>：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Buy Limit（低于当前价挂单）  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Trade.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BuyLimit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3450</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 预期价格跌到3450时买入  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Buy Stop（高于当前价挂单）  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Trade.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BuyStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3480</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // 预期价格涨到3480时买入</span></span></code></pre></div></li><li><p><strong>止盈止损设置</strong>：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 开仓时同时设置止损20点、止盈40点（基于开仓价）  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Trade.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Buy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RB2301&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Symbol.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li></ul><h4 id="三、代码调试与郭老师源码学习" tabindex="-1">三、代码调试与郭老师源码学习 <a class="header-anchor" href="#三、代码调试与郭老师源码学习" aria-label="Permalink to &quot;三、代码调试与郭老师源码学习&quot;">​</a></h4><h5 id="_1-常见问题与解决" tabindex="-1">1. 常见问题与解决 <a class="header-anchor" href="#_1-常见问题与解决" aria-label="Permalink to &quot;1. 常见问题与解决&quot;">​</a></h5><ul><li><p><strong>未成交挂单</strong>：</p><ul><li>原因：报价偏离市场价格过远，未触发撮合条件。</li><li>解决：通过<code>Trade.OrdersTotal()</code>获取挂单总数，用<code>Trade.OrderSelect(ticket, SELECT_BY_TICKET)</code>选中挂单后撤单或改价。</li></ul></li><li><p><strong>价格超限</strong>：</p><ul><li>报错：<code>Invalid price</code>（价格超出涨跌停板范围）。</li><li>解决：先通过<code>Symbol.UpperLimit()</code>和<code>Symbol.LowerLimit()</code>获取有效价格区间。</li></ul></li></ul><h5 id="_2-郭老师源码参考" tabindex="-1">2. 郭老师源码参考 <a class="header-anchor" href="#_2-郭老师源码参考" aria-label="Permalink to &quot;2. 郭老师源码参考&quot;">​</a></h5><ul><li><p><strong>代码结构</strong>：</p><ul><li>开仓逻辑集中在<code>UICTP.mq5</code>中，通过条件判断区分限价、市价、停板价等不同报价类型。</li><li>核心函数：<code>SendOrder()</code>封装了报单细节（如合约、手数、价格、止损止盈）。</li></ul></li><li><p><strong>工具辅助</strong>：</p><ul><li><strong>EditPlus</strong>：支持多文件搜索（如搜索<code>UpperLimit</code>定位涨停价使用逻辑）、垂直编辑（按住<code>Alt</code>键批量操作代码）。</li><li><strong>IDE右键功能</strong>：双击函数名或类名，快速跳转库文件查看定义（如<code>CTrade</code>类的<code>Buy</code>方法实现）。</li></ul></li></ul><h4 id="四、实战建议与总结" tabindex="-1">四、实战建议与总结 <a class="header-anchor" href="#四、实战建议与总结" aria-label="Permalink to &quot;四、实战建议与总结&quot;">​</a></h4><h5 id="_1-操作流程" tabindex="-1">1. 操作流程 <a class="header-anchor" href="#_1-操作流程" aria-label="Permalink to &quot;1. 操作流程&quot;">​</a></h5><ol><li><strong>合约选择</strong>：<code>Symbol.Select(&quot;品种代码&quot;)</code>（如<code>RB2301</code>）。</li><li><strong>价格获取</strong>：使用<code>Symbol.Ask()</code>（卖一价）、<code>Symbol.LastPrice()</code>（最新价）、<code>Symbol.UpperLimit()</code>（涨停价）。</li><li><strong>开仓指令</strong>：根据交易策略选择<code>Buy</code>（市价）、<code>BuyLimit</code>（限价低挂）、<code>BuyStop</code>（限价高挂）。</li><li><strong>风控设置</strong>：开仓时传入止损/止盈点数（如<code>Trade.Buy(1, &quot;RB2301&quot;, 0, 20, 40)</code>）。</li></ol><h5 id="_2-注意事项" tabindex="-1">2. 注意事项 <a class="header-anchor" href="#_2-注意事项" aria-label="Permalink to &quot;2. 注意事项&quot;">​</a></h5><ul><li><strong>MT5持仓区分</strong>：通过<code>Magic</code>号标识不同策略开仓的单子（如策略A用<code>666</code>，策略B用<code>888</code>），便于后续平仓筛选。</li><li><strong>代码风格</strong>：参考郭老师命名规范（如<code>CSymbolInfo</code>类、<code>UpperLimit</code>方法），保持变量名与功能一致。</li></ul><h5 id="_3-总结" tabindex="-1">3. 总结 <a class="header-anchor" href="#_3-总结" aria-label="Permalink to &quot;3. 总结&quot;">​</a></h5><p>本次课围绕开仓操作，讲解了报价机制、开仓类型、代码实现及工具使用。核心是通过<code>CTrade</code>类的方法实现不同策略的开仓，并结合<code>CSymbolInfo</code>获取合约关键价格。新手需重点练习市价/限价开仓、止损止盈设置，逐步熟悉郭老师封装的库函数，为后续策略开发打下基础。</p>`,25)]))}const c=s(e,[["render",n]]);export{g as __pageData,c as default};
