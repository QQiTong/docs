import{_ as s,c as a,aI as t,o as l}from"./chunks/framework.b7dag8kZ.js";const c=JSON.parse('{"title":"","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://vite.dev/mt5_ctp/quick_start/account_info"}],["meta",{"property":"og:title","content":""}]]},"headers":[],"relativePath":"mt5_ctp/quick_start/account_info.md","filePath":"mt5_ctp/quick_start/account_info.md","lastUpdated":1746376832000}'),n={name:"mt5_ctp/quick_start/account_info.md"};function e(h,i,p,k,o,d){return l(),a("div",null,i[0]||(i[0]=[t(`<h3 id="_08-mt5ctp基础函数-账户" tabindex="-1">08 MT5CTP基础函数 账户 <a class="header-anchor" href="#_08-mt5ctp基础函数-账户" aria-label="Permalink to &quot;08 MT5CTP基础函数 账户&quot;">​</a></h3><p>2025年04月29日 10:53</p><h4 id="课程引入与账户准备" tabindex="-1">课程引入与账户准备 <a class="header-anchor" href="#课程引入与账户准备" aria-label="Permalink to &quot;课程引入与账户准备&quot;">​</a></h4><p>各位朋友大家好，很高兴再次进入MT5 CTP的学习。前七次课我们主要介绍了MQL语言的基础语法，掌握这些语法后才能编写指标和策略。从本次课开始，我们将介绍MT5 CTP的基础函数，这部分内容与前面的语法学习有很大不同。</p><p>对于有编程经验的朋友，前面的基础语法可能较为简单；但对于新手来说，可能会觉得进度较快。不过不用担心，基础语法（如表达式、条件语句）是后续学习的框架，从现在开始的基础函数学习是一个新的起点，即使前面掌握不牢，也可以重新跟上。</p><p>在正式开始前，先回顾账户申请相关内容：</p><ol><li><strong>CM Dollar网站</strong>：这是一个用于申请模拟账户的平台，非开盘时间可能维护或不可用。使用手机号申请后，会获得一个ID号（真实账户信息），密码为网站注册密码（首次登录可能需要修改密码）。</li><li><strong>登录建议</strong>：首次登录建议使用“博弈大师”等工具修改密码，再通过MT5 CTP登录。登录时需在“交易服务”中正确填写用户名、密码及期货公司信息。</li></ol><h4 id="界面调整与账户登录" tabindex="-1">界面调整与账户登录 <a class="header-anchor" href="#界面调整与账户登录" aria-label="Permalink to &quot;界面调整与账户登录&quot;">​</a></h4><ol><li><strong>关闭多余窗口</strong>：通过右键关闭或快捷键（Ctrl+F4或Ctrl+W）关闭MT5 CTP中所有已打开的页面，重新打开一个新图表（如螺纹钢RB888，活跃品种便于操作）。</li><li><strong>加载UI CTP界面</strong>：在导航栏中找到“EA交易”→“MT5 CTP”→“UI CTP”，双击或拖入图表窗口，勾选“允许算法交易”并确定。登录后在“账户”标签页可查看账户信息（如账户号、权益、可用资金等）。</li></ol><h4 id="变量作用域与命名空间" tabindex="-1">变量作用域与命名空间 <a class="header-anchor" href="#变量作用域与命名空间" aria-label="Permalink to &quot;变量作用域与命名空间&quot;">​</a></h4><ol><li><p><strong>变量作用域</strong>：</p><ul><li><strong>全局变量</strong>：定义在函数外，作用域从定义处到文件结束。</li><li><strong>局部变量</strong>：定义在函数内或代码块（如for循环）中，作用域仅限于所在函数或代码块。</li><li><strong>示例</strong>：不同作用域内可重复定义同名变量（如多个<code>int i</code>），编译器会优先使用离调用处最近的局部变量，无局部变量时使用全局变量。</li></ul></li><li><p><strong>库与命名空间</strong>：</p><ul><li><strong>库文件（.MQH）</strong>：将常用函数封装成库文件（如<code>my_library.MQH</code>），通过<code>#include</code>指令引入，避免重复编写代码，提高复用性。</li><li><strong>命名空间</strong>：解决不同库或模块中同名变量/函数的冲突问题，类似“平行宇宙”概念。MT5 CTP中通过命名空间（如<code>MT5CTP</code>）区分国内期货与外盘交易相关功能，确保指令唯一性。</li></ul></li></ol><h4 id="账户信息获取函数" tabindex="-1">账户信息获取函数 <a class="header-anchor" href="#账户信息获取函数" aria-label="Permalink to &quot;账户信息获取函数&quot;">​</a></h4><ol><li><p><strong>新建脚本文件</strong>：创建<code>test_008.mq5</code>，引入MT5 CTP账户信息库：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;MT5CTP/Account/AccountInfo.mqh&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MT5CTP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><ul><li><code>AccountInfo.mqh</code>：封装了账户相关类和函数。</li><li><code>using namespace MT5CTP</code>：指定使用该命名空间，避免重复书写。</li></ul></li><li><p><strong>定义账户对象</strong>：</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CAccountInfo m_account;</span></span></code></pre></div><ul><li><code>CAccountInfo</code>：郭老师定义的账户类，包含账户号、经纪公司、权益等成员变量和方法。</li></ul></li><li><p><strong>常用账户函数示例</strong>：</p><ul><li><strong>判断账户是否登录</strong>：<div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> is_account_exist </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AccountExist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;账户是否存在：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, is_account_exist </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;True&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;False&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><ul><li>结果<code>True</code>表示已登录，<code>False</code>表示未登录（可通过停止交易服务验证）。</li></ul></li><li><strong>获取可用资金</strong>：<div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> available_funds </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Available</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;可用资金：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, available_funds);</span></span></code></pre></div></li><li><strong>获取经纪公司ID</strong>：<div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">string broker_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BrokerID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;经纪公司ID：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, broker_id);</span></span></code></pre></div></li></ul></li><li><p><strong>多账户信息输出</strong>：</p><ul><li>MT5 CTP支持多账户管理，通过<code>CAccountInfo</code>类可遍历所有账户信息：<div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Total</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 切换账户  </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;账户&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, i, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;：ID=&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AccountID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;，权益=&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, m_account.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Balance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li>实际效果：输出所有账户的ID、经纪公司、可用资金、动态权益等信息，与MT5 CTP界面中的账户信息一致。</li></ul></li></ol><h4 id="条件编译与代码优化" tabindex="-1">条件编译与代码优化 <a class="header-anchor" href="#条件编译与代码优化" aria-label="Permalink to &quot;条件编译与代码优化&quot;">​</a></h4><ol><li><p><strong>条件编译（<code>#ifdef</code>）</strong>：</p><ul><li>作用：根据定义的宏（如<code>_MT5CTP_</code>）决定编译哪些代码，用于区分生产环境（真实交易）和回测环境（模拟交易）。</li><li>示例：<div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#ifdef</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _MT5CTP_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    #include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;MT5CTP/Account/AccountInfo.mqh&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    #include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &lt;MT5/Account/AccountInfo.mqh&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 外盘账户信息库（示例）  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#endif</span></span></code></pre></div></li></ul></li><li><p><strong>代码规范</strong>：</p><ul><li>变量名：小写开头（如<code>available_funds</code>），类名/函数名：驼峰式命名（如<code>CAccountInfo</code>、<code>BrokerID</code>）。</li><li>注释：使用双斜杠（<code>//</code>）或多行注释（<code>/* ... */</code>）说明代码功能，提高可读性。</li></ul></li></ol><h4 id="总结与练习" tabindex="-1">总结与练习 <a class="header-anchor" href="#总结与练习" aria-label="Permalink to &quot;总结与练习&quot;">​</a></h4><p>本次课介绍了MT5 CTP中与账户相关的基础函数，包括账户状态判断、资金信息获取、多账户管理等。新手需重点掌握：</p><ol><li>通过库文件和命名空间引入账户类。</li><li>使用成员函数获取账户信息（如<code>AccountExist()</code>、<code>Available()</code>）。</li><li>理解变量作用域和条件编译的基本概念。</li></ol><p><strong>练习建议</strong>：</p><ul><li>编写脚本输出当前账户的可用资金、经纪公司ID、登录状态。</li><li>尝试修改模拟账户资金（通过CM Dollar网站），观察代码输出变化。</li></ul><p>后续课程将继续介绍MT5 CTP的其他基础函数，逐步构建完整的交易策略开发框架。</p>`,21)]))}const g=s(n,[["render",e]]);export{c as __pageData,g as default};
