import{_ as t}from"./chunks/compile_icon.BdBG-A29.js";import{_ as r,a,b as i}from"./chunks/info_icon.B0mCpcie.js";import{_ as o}from"./chunks/go_to_line_icon.DnbrMUu9.js";import{_ as p,c as l,ag as m,o as n}from"./chunks/framework.CCnnzLsu.js";const s="/metaeditor/compilation.png",c="/metaeditor/compilation_mode.png",d="/metaeditor/cpu_z.png",_="/metaeditor/compilation_architecture.png",q=JSON.parse('{"title":"编译","description":"","frontmatter":{"head":[["link",{"rel":"canonical","href":"https://vite.dev/metaeditor/development/compile"}],["meta",{"property":"og:title","content":"编译"}]]},"headers":[],"relativePath":"metaeditor/development/compile.md","filePath":"metaeditor/development/compile.md","lastUpdated":1744293048000}'),h={name:"metaeditor/development/compile.md"};function f(u,e,g,w,k,X){return n(),l("div",null,e[0]||(e[0]=[m('<h1 id="编译" tabindex="-1">编译 <a class="header-anchor" href="#编译" aria-label="Permalink to &quot;编译&quot;">​</a></h1><p>编译意即将 MQL4/MQL5 程序的源代码转换为机器语言。 结果是可以在交易平台上启动的可执行程序文件 (*.EX4 或 *.EX5)。</p><p>编译由几个阶段组成:</p><ul><li><p>词汇分析</p></li><li><p>语法分析</p></li><li><p>语义分析</p></li><li><p>代码生成</p></li><li><p>代码优化</p></li><li><p>任何文件 (*.MQ4, *.MQ5 或 <em>.MQH) 均可被编译, 但可执行文件 (</em>.EX4 或 *.EX5) 只能通过编译 <a href="/metaeditor/other/structure#main_file">主体的</a> MQ4/MQ5 程序文件或 <a href="/metaeditor/mql5storage/projects">项目</a> 才能得到。</p></li><li><p>可执行文件以其自己的格式创建，隐藏原始程序算法。</p></li><li><p>已编译的执行 EX4/EX5 文件可以在没有 MQ4、MQ5 和 MQH 源文件的情况下分发。 没有它们，调试是不可能的。 也不建议分发调试过程中得到的可执行 EX4/EX5 文件。</p></li></ul><p>若要得到可执行文件，通过 <a href="/metaeditor/workspace/navigator">导航器</a> 打开 <a href="/metaeditor/other/structure#main_file">主体</a> 源文件或项目 并点击 <img src="'+t+'" alt="编译"> 编译在 <a href="/metaeditor/main_menu/main_menu_file#compile">文件</a> 菜单里或按 F7。 编译过程显示在工具箱窗口的 <a href="/metaeditor/workspace/toolbox#errors">错误</a> 选项卡上。 如果编译通过没有错误，您可以在交易平台上运行获得的程序。</p><p><img src="'+s+'" alt="编译程序并在 &quot;错误&quot; 选项卡上显示结果"></p><p>如果有错误或警告，它们将显示在错误选项卡上。</p><p>编译错误标有<img src="'+r+'" alt="错误">在错误选项卡上以及相应的代码段中。 如果这种情况发生，则不会创建可执行程序文件 (*.EX4 或 *.EX5)。 若要跳转到错误字符串，请双击错误或单击<img src="'+o+'" alt="跳转到行">在关联菜单中跳转到行命令。 字符串和检测到错误的列将显示在相应的列中。</p><p>警告标有<img src="'+a+'" alt="警告">图标表示潜在错误的地方。 这些是可能被误解的源代码段 (例如，隐性数值类型变更)。 您可以像错误一样跳转到这些代码字符串。</p><p><img src="'+i+'" alt="信息">图标代表各种信息消息，例如，关于在编译过程中访问的头文件的消息。</p><h2 id="mode" tabindex="-1">编译模式 <a class="header-anchor" href="#mode" aria-label="Permalink to &quot;编译模式{#mode}&quot;">​</a></h2><p>编辑器提供两种编译模式：包含最大限度的代码优化和没有优化。</p><p>当优化功能被禁用时，创建可执行文件所需的时间会明显减少。当您需要快速检查编写代码时，请在开发阶段使用此模式。然后，在最终程序编译期间，打开最大优化模式以获得最佳性能。</p><p>要在这些模式之间切换，可以使用 &quot;构建 &quot;菜单或工具栏上的编译命令菜单。</p><p><img src="'+c+'" alt="控制编译模式"></p><p>项目设置中的“<a href="/metaeditor/mql5storage/projects#properties">最大优化</a>”参数执行相同的功能。</p><ul><li>完整的编译错误描述已在 MQL4/MQL5 语言帮助中提供。</li><li>在出现警告的情况下，依然会生成可执行文件。 但不应忽略警告，因为它们表明潜在的代码错误。</li><li>在编译期间, 可执行文件 (*.EX4 或 <em>.EX5) 与程序的 <a href="/metaeditor/other/structure#main_file">主体源文件</a> (</em>.MQ4 或 *.MQ5) 亦或 <a href="/metaeditor/mql5storage/projects">项目</a> 生成在同一目录下。</li><li>metaeditor.exe 可用作 <a href="/metaeditor/welcome/integration_ide">第三方集成开发环境的外部编译器</a>。</li></ul><h2 id="architecture" tabindex="-1">针对不同架构的处理器进行编译 <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;针对不同架构的处理器进行编译{#architecture}&quot;">​</a></h2><p>现代处理器提供了一组可明显加快数学计算速度的高级指令：<a href="https://en.wikipedia.org/wiki/Advanced_Vector_Extensions" target="_blank" rel="noreferrer">AVX</a>、<a href="https://en.wikipedia.org/wiki/Advanced_Vector_Extensions" target="_blank" rel="noreferrer">AVX2</a>、<a href="https://en.wikipedia.org/wiki/AVX-512" target="_blank" rel="noreferrer">AVX512</a>和<a href="https://en.wikipedia.org/wiki/FMA_instruction_set" target="_blank" rel="noreferrer">FMA3</a>。这些指令在MQL5编译器中得到支持，可以生成更高效、更快速的代码。可以选择使用这些指令：</p><ul><li>如果您正在为自己创建一个应用程序，并且确定它将在支持所需架构的处理器上运行，则可以使用高级指令对其进行编译。这将提供更高的性能。</li><li>如果您要创建供公共使用或出售的程序，请使用X64常规模式下的基本指令集对其进行编译。这将确保应用程序与用户硬件的最大程度兼容性。</li></ul><p>要了解您的处理器支持哪些指令，请使用<a href="https://www.cpuid.com/softwares/cpu-z.html" target="_blank" rel="noreferrer">CPU-Z免费实用程序</a>。安装后，打开“CPU”部分并检查“指令”字段：</p><p><img src="'+d+'" alt="使用CPU-Z检查您的处理器支持哪些指令"></p><p>要选择处理器架构，请使用编译菜单。接下来，点击“编译”。您还可以在<a href="/metaeditor/welcome/settings#compiler">MetaEditor设置</a>和<a href="/metaeditor/mql5storage/projects#properties">单独的项目设置</a>中指定架构。</p><p><img src="'+_+'" alt="选择将为其编译程序的处理器架构"></p><p>如果是为了用户处理器不支持的架构编译应用程序，则尝试运行该程序将导致在平台日志中记录以下消息：</p><p>您的CPU架构不允许运行文件&#39;file-name.ex5&#39;：需要AVX512，您只有AVX2</p><p>限制：</p><ul><li><a href="https://www.metatrader5.com/zh/terminal/help/algotrading/strategy_optimization#cloud" target="_blank" rel="noreferrer">MQL5云网络</a>和<a href="https://www.metatrader5.com/zh/terminal/help/virtual_hosting" target="_blank" rel="noreferrer">内置VPS</a>尚不支持AVX512处理器编译的程序。</li><li>只有在X64常规模式下编译的文件才能上传到<a href="https://www.mql5.com/zh/articles/385" target="_blank" rel="noreferrer">市场</a>。这是确保应用程序与用户硬件最大兼容性所必需的。</li></ul>',28)]))}const A=p(h,[["render",f]]);export{q as __pageData,A as default};
